var dimension=[0,0];$(document).on("shiny:connected",(function(e){dimension[0]=window.innerWidth,dimension[1]=window.innerHeight,Shiny.onInputChange("dimension",dimension)})),$(window).resize((function(e){dimension[0]=window.innerWidth,dimension[1]=window.innerHeight,Shiny.onInputChange("dimension",dimension)}));const DownloadButtonState={getButton:function(id){return document.querySelector(`#${CSS.escape(id)}`)},enable:function(id){const button=this.getButton(id);button&&button.hasAttribute("onclick")&&button.removeAttribute("onclick")},disable:function(id){const button=this.getButton(id);button&&!button.hasAttribute("onclick")&&button.setAttribute("onclick","return false;")},toggle:function(id,disable){disable?this.disable(id):this.enable(id)},toggleCallback:function(message){const{id:id,disable:disable}=message;this.toggle(id,disable)}},PointHoverWidget={getPlot:function(id){return document.querySelector(`#${CSS.escape(id)}`)},getPlotWidget:function(id){return this.getPlot(id).querySelector(".point-hover-widget")},buildValueInfo:function(axis,name,value){const valueElement=document.createElement("span");valueElement.className=`${axis}__value value`,valueElement.textContent=value;const nameElement=document.createElement("span");nameElement.className=`${axis}__name name`,nameElement.textContent=`${name}:`;const info=document.createElement("span");return info.className=`${axis} point-info`,info.appendChild(nameElement),info.appendChild(valueElement),info},addWidget:function(plotId,pointInfo,mapping,coords_css,coords_img,range,x_y_labels){const bubble=document.createElement("div");bubble.className="bubble";const idName=Object.keys(pointInfo)[0],idDisplay=idName.charAt(0).toUpperCase()+idName.slice(1),value=pointInfo[idName];bubble.appendChild(this.buildValueInfo(idName,idDisplay,value)),bubble.appendChild(this.buildValueInfo("x",x_y_labels.x,pointInfo[mapping.x])),bubble.appendChild(this.buildValueInfo("y",x_y_labels.y,pointInfo[mapping.y]));const plot=this.getPlot(plotId),widget=document.createElement("div");widget.className="point-hover-widget";const middle=(range.right-range.left)/2+range.left;coords_img.x<=middle?(widget.style.left=coords_css.x-25+"px",bubble.classList.add("left")):coords_img.x>middle&&(widget.style.right=plot.clientWidth-coords_css.x-25+"px",bubble.classList.add("right")),widget.style.bottom=400-coords_css.y+10+"px",widget.appendChild(bubble),plot.appendChild(widget)},removeWidget:function(plotId){this.getPlotWidget(plotId)&&this.getPlot(plotId).removeChild(this.getPlotWidget(plotId))},inputEqualCurrentWidget:function(currentWidget,x,y,site){return currentWidget.querySelector(".x__value").textContent===x&&currentWidget.querySelector(".y__value").textContent===y.toString()&&currentWidget.querySelector(".site__value").textContent===site},needUpdate:function(plotId,pointInfo,mapping){const currentWidget=this.getPlotWidget(plotId);return null===currentWidget||!this.inputEqualCurrentWidget(currentWidget,pointInfo[mapping.x],pointInfo[mapping.y],pointInfo.Site_ID)},addWidgetCallback:function(message){const{pointInfo:pointInfo,mapping:mapping,coords_css:coords_css,coords_img:coords_img,range:range,x_y_labels:x_y_labels,plotId:plotId}=message;this.needUpdate(plotId,pointInfo,mapping)&&(this.removeWidget(plotId),this.addWidget(plotId,pointInfo,mapping,coords_css,coords_img,range,x_y_labels))},removeWidgetCallback:function(message){this.removeWidget(message.plotId)}};Shiny.addCustomMessageHandler("addHoverWidget",PointHoverWidget.addWidgetCallback.bind(PointHoverWidget)),Shiny.addCustomMessageHandler("removeHoverWidget",PointHoverWidget.removeWidgetCallback.bind(PointHoverWidget)),Shiny.addCustomMessageHandler("toggledlbutton",DownloadButtonState.toggleCallback.bind(DownloadButtonState)),$(document).ready((function(){$(".progress-bar").on("DOMSubtreeModified",(function(){var target=document.querySelector(".progress-bar");"Upload complete"===target.textContent&&(target.textContent="Files selected")}))}));